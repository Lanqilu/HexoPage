---
title: 数据链路层
date: 2021-07-09 12:34:00
categories: 计算机网络
tags: 计算机网络
---

## 数据链路层基本概念

<font color="#ea66a6">结点</font>：主机、路由器

<font color="#ea66a6">链路</font>：网络中两个结点之间的<font color="#33a3dc">物理通道</font>，链路的传输介质主要有双绞线、光纤和微波。分为有线链路、无线链路。

<font color="#ea66a6">数据链路</font>：网络中两个结点之间的<font color="#33a3dc">逻辑通道</font>，把实现控制数据传输协议的硬件和软件加到链路上就构成数据链路。

<font color="#ea66a6">帧</font>：链路层的协议数据单元，封装网络层数据报。

数据链路层负责通过一条链路从一个结点向另一个物理链路直接相连的相邻结点传送数据报。

## 数据链路层的功能

数据链路层在物理层提供服务的基础上向网络层提供服务，其最基本的服务是将源自网络层来的数据可靠地传输到相邻节点的目标机网络层。其主要作用是加强物理层传输原始比特流的功能，将物理层提供的可能出错的物理连接改造成为逻辑上无差错的数据链路，使之对网络层表现为一条无差错的链路。

- 功能一：为网络层提供服务。无确认无连接服务，有确认无连接服务，有确认面向连接服务。（有连接一定有确认，不存在有连接没有确认的服务）
- 功能二：链路管理，即连接的建立、维持、释放（用于面向连接的服务）。
- 功能三：组帧。
- 功能四：流量控制。
- 功能五：差错控制（帧错/位错）

### 为网络层提供服务

### 链路管理

### 帧定界、帧同步与透明传输

### 流量管理

### 差错控制

## 组帧

### 封装成帧

<font color="#faa755">封装成帧</font>就是在一段数据的前后部分添加首部和尾部，这样就构成了一个帧。接收端在收到物理层上交的比特流后，就能根据首部和尾部的标记，从收到的比特流中识别帧的开始和结束。

首部和尾部包含许多的控制信息，他们的一个重要作用：<font color="#33a3dc">帧定界</font>（确定帧的界限）。

<font color="#faa755">帧同步</font>：接收方应当能从接收到的二进制比特流中区分出帧的起始和终止。

组帧的四种方法：

1. 字符计数法
2. 字符（节）填充法
3. 零比特填充法
4. 违规编码法

![image](https://cdn.jsdelivr.net/gh/halo-blog/cdn-blog-img-e@master/image.2znurkhe6tw0.png)

### 透明传输

<font color="#faa755">透明传输</font>是指不管所传数据是什么样的比特组合，都应当能够在链路上传送。因此，链路层就“看不见”有什么妨碍数据传输的东西。

当所传数据中的比特组合恰巧与某一个控制信息完全一样时，就必须采取适当的措施，使收方不会将这样的数据误认为是某种控制信息。这样才能保证数据链路层的传输是透明的。

### 字符计数法

帧首部使用一个计数字段（第一个字节，八位）来标明帧内字符数。

![image](https://cdn.jsdelivr.net/gh/halo-blog/cdn-blog-img-e@master/image.3ydd27olhj00.png)

痛点：鸡蛋装在一个篮子里了。

### 字符填充的首尾定界符法

- 当传送的帧是由文本文件组成时（文本文件的字符都是从键盘上输入的，都是 ASCII 码）。 不管从键盘上输入什么字符都可以放在帧里传过去，即透明传输。
- 当传送的帧是由非 ASCII 码的文本文件组成时（二进制代码的程序或图像等）。 就要采用字符填充方法实现透明传输。

### 零比特填充的为首标志法

操作：

1. 在发送端，扫描整个信息字段，只要连续 5 个 1，就立即填入 1 个 0。
2. 在接收端收到一个帧时，先找到标志字段确定边界，再用硬件对比特流进行扫描。发现连续 5 个 1 时，就把后面的 0 删除。

保证了透明传输：在传送的比特流中可以传送任意比特组合，而不会引起对帧边界的判断错误。

### 违规编码法

可以用“高-高”，“低-低”来定界帧的起始和终止。

由于字节计数法中 Count 字段的脆弱性（其值若有差错将导致灾难性后果）及字符填充实现上的复杂性和不兼容性，目前较普遍使用的帧同步法是比特填充和违规编码法。

## 差错控制

概括来说，传输中的差错都是由于噪声引起的。
全局性，由于线路本身电气特性所产生的随机噪声（热噪声），是信道固有的，随机存在的。解决办法：提高信噪比来减少或避免干扰。（对传感器下手）

局部性，外界特定的短暂原因所造成的冲击噪声，是产生差错的主要原因。解决办法：通常利用编码技术来解决。

### 检错编码

奇偶校验码

CRC 循环冗余码

### 纠错编码

海明码

## 流量控制与可靠传输机制

### 流量控制、可靠传输与滑动窗口机制

较高的发送速度和较低的接收能力的不匹配，会造成传输出错，因此流量控制也是数据链路层的一项重要工作。

数据链路层的流量控制是点对点的，而传输层的流量控制是端到端的。

数据链路层流量控制手段：接收方收不下就不回复确认。

传输层流量控制手段：接收端给发送端一个窗口公告。

可靠传输：发送端发啥，接收端收啥。

流量控制：控制发送速率，使接收方有足够的缓冲空间来接收每一个帧。

滑动窗口解决：流量控制（收不下就不给确认，想发也发不了），可靠传输（发送方自动重传）

### 单帧滑动窗与停止等待协议

每发送完一个帧就停止发送，等待对方的确认，在收到确认后再发送下一个帧。

### 多帧滑动窗口与后退 N 帧协议（GBN）

### 多帧滑动窗与选择重传协议（SR）

## 介质访问控制

### 信道划分介质访问控制

### 随机访问介质访问控制

### 轮询访问介质访问控制：令牌传递协议

## 局域网

### 局域网的基本概念和体系结构

### 以太网与 IEE 802.3

### IEEE 802.11

### 令牌环网的基本原理

## 广域网

### 广域网的基本概念

### PPP 协议

### HDLC 协议

## 数据链路层设备

### 网桥的概念及其基本原理

### 局域网交换机及其工作原理
